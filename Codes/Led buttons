const int buttonPinG = 27;     
const int buttonPinB = 26; 
const int buttonPinR = 25; 

const int ledPinG = 13;     
const int ledPinB = 12; 
const int ledPinR = 14; 

boolean valG = 0;
boolean valB = 0;
boolean valR = 0;

boolean buttonStateG = 0;
boolean buttonStateB = 0;
boolean buttonStateR = 0;

boolean lastButtonStateG = 0;
boolean lastButtonStateB = 0;
boolean lastButtonStateR = 0;

int reset_count = 0;


void setup() {
  Serial.begin(115200);
  
 pinMode(buttonPinR, INPUT);
  pinMode(buttonPinG, INPUT);
  pinMode(buttonPinB, INPUT);

 pinMode(ledPinR, OUTPUT);
  pinMode(ledPinG, OUTPUT);
  pinMode(ledPinB, OUTPUT);
}

void loop()
{    
  tlacitka();
}

void tlacitka()
{

///// co se stane pro naběžnou hranu ZELENEHO

  buttonStateG = digitalRead(buttonPinG);
  if ( (buttonStateG == 1) && (lastButtonStateG == 0) )
  {
   valG = 1;
   valB = 0;
  } 

  digitalWrite(ledPinG, valG);
  lastButtonStateG = buttonStateG;
  delay(10);

///// co se stane pro naběžnou hranu MODREHO

  buttonStateB = digitalRead(buttonPinB);
  if ( (buttonStateB == 1) && (lastButtonStateB == 0) )
  {
   valB = 1;
   valG = 0;
  } 

  digitalWrite(ledPinB, valB);
  lastButtonStateB = buttonStateB;
  delay(10);


Serial.print(digitalRead(buttonPinR));
///// co se stane pro naběžnou hranu ČERVENEHO

  buttonStateR = digitalRead(buttonPinR);                                         
  if (( buttonStateR == HIGH ) and (reset_count < 30) and (valB == 1))
  {
    buttonStateR = digitalRead(buttonPinR);
    
    delay(100);
    digitalWrite(ledPinR, valR);
    valR = not valR ;
    reset_count = reset_count + 1; 
  }
  else
  {
   valR = HIGH;
   digitalWrite(ledPinR, valR);
  }

  if (( (lastButtonStateR == HIGH) and (buttonStateR == LOW) and (reset_count < 30)) or ( (valB != 1) ) )
  {
    reset_count = 0;
  }
  
  if ( (lastButtonStateR == HIGH) and (buttonStateR == LOW) and (reset_count == 30) and (valB == 1))
  {
    reset_count = 0;
    digitalWrite(ledPinG, HIGH);
    delay(200);
    digitalWrite(ledPinG, LOW);
    delay(200);
    digitalWrite(ledPinG, HIGH);
    delay(200);
    digitalWrite(ledPinG, LOW);
    delay(200);
    digitalWrite(ledPinG, HIGH);
    delay(200);
    digitalWrite(ledPinG, LOW);
    //DELETE ALL//
  }
  
 lastButtonStateR = buttonStateR; 
}
